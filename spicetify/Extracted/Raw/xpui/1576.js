"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1576],{61576:(e,s,a)=>{a.d(s,{AdDebug:()=>k});a(99974);var r=a(30758),t=a(22280),l=a(49971),n=a(15935),i=a(13791),o=a(3520),d=a(78141),c=a(44481),u=a(422),h=a(84010),g=a(26380),m=a(45695),v=a(27241);const x=(0,m.h)();window.abba={get:async function(e,s){const a=new g.EW((0,v.X)()),r=(await a.getValues(g.kM.fromPartial({}))).pairs;let t={},l="";if(r.abbaOverrides?l=r.abbaOverrides:r.abbaoverrides&&(l=r.abbaoverrides),l)try{t=JSON.parse(l)}catch(e){console.error(`error parsing value=${l}, error=${e}`)}if(Object.prototype.hasOwnProperty.call(t,e))return console.warn(`Abba: Override for ${e} : ${t[e]}`),void setTimeout((()=>s(null,t[e])),0);x.post("sp://abba/v1/flags",{flags:[e]}).then((a=>{const{flags:r=[]}=a,t=r[0]&&r[0].featureName===e&&r[0].cell;s(null,t||null)})).catch((e=>{s(e)}))},getAll:function(e){console.warn("Abba:getAll should only be used by TA tests for logging purposes."),x.get("sp://abba/v1/all_flags").then((s=>{const{flags:a=[]}=s,r=a.reduce(((e,s)=>(e[s.featureName]=s.cell,e)),{});e(null,JSON.stringify(r,null,2))})).catch((s=>{e(s)}))},getRequestedFlagNames:function(e){x.get("sp://abba/v1/requested_flag_names").then((s=>{e(null,JSON.stringify(s.sort(),null,2))})).catch((s=>{e(s)}))}};var p=a(35426);const b=function(){const[e,s]=(0,r.useState)();return{adMocks:e,getAdMocks:(0,r.useCallback)((async()=>p.D.getMocksList().then((e=>{s(e.body.test_cases)}))),[])}},j="rh7v8PDNC0ke2OkkyRhk",f="Kh0jtEAjRK83Z5A_IZRx";var C=a(86070);const k=()=>{const e=e=>60*e,[s,a]=(0,r.useState)(e(20)),[g,m]=(0,r.useState)(""),[v,x]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[A,y]=(0,r.useState)((new Date).toISOString()),[E,N]=(0,r.useState)({message:"",status:"success"}),[$,w]=(0,r.useState)(!1),{adMocks:O,getAdMocks:T}=b(),D=({message:e,isError:s})=>{N({message:e,status:s?"error":"success"}),w(!0),setTimeout((()=>w(!1)),5e3)},Z=(0,r.useCallback)((e=>{p.D.clearSlot(e).then((()=>{D({message:`${e} cleared`,isError:!1})}))}),[]),M=(0,r.useCallback)((e=>{a(e),p.D.increaseStreamTime(e).then((()=>{D({message:`${e} seconds of stream time added`,isError:!1})})).catch((e=>{D({message:`Error increasing stream time: ${e}`,isError:!0})}))}),[]);return(0,r.useEffect)((()=>{T().then((()=>{D({message:"Ad mocks fetched",isError:!1})})).catch((()=>{D({message:"Ad mocks fetch failed",isError:!0})}))}),[T]),(0,C.jsxs)("div",{className:j,children:[(0,C.jsx)(t.qb,{colorSet:"error"===E.status?"negative":"brightAccent",showSnackbar:$,children:E.message}),(0,C.jsx)(l.Z,{as:"h1",variant:"forte",paddingBottom:"24px",children:"Ad Debug Tools"}),(0,C.jsx)(l.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Increase Stream Time"}),(0,C.jsx)(n.g,{label:"Quick add stream time",children:(0,C.jsx)("div",{className:f,children:(0,C.jsxs)(i.I,{mode:"action",layout:"single-line","aria-label":"Stream time presets",children:[(0,C.jsx)(o.v,{variant:"contrasting",onClick:()=>M(e(1)),children:"Add 1 min"}),(0,C.jsx)(o.v,{variant:"contrasting",onClick:()=>M(e(20)),children:"Add 20 mins"}),(0,C.jsx)(o.v,{variant:"contrasting",onClick:()=>M(e(40)),children:"Add 40 mins"}),(0,C.jsx)(o.v,{variant:"contrasting",onClick:()=>M(e(60)),children:"Add 1 hour"})]})})}),(0,C.jsxs)(n.g,{label:"Custom stream time in seconds",children:[(0,C.jsx)("div",{className:f,children:(0,C.jsx)(d.Z,{onChange:e=>a(e.currentTarget.value),placeholder:"seconds",value:s,type:"number",min:0})}),(0,C.jsx)("div",{className:f,children:(0,C.jsxs)(c.$,{size:"small",onClick:()=>M(s),children:["Add ",s," seconds (~ ",(q=s,Math.round(Number(q)/60))," minutes)"]})})]}),(0,C.jsx)(l.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Fetch ad from Ad Mocker"}),(0,C.jsxs)(n.g,{label:"Enqueue ad json directly into pod",children:[(0,C.jsxs)("div",{className:f,children:[(0,C.jsx)(u.E,{as:"label",htmlFor:"adMockerSessionId",variant:"bodyMedium",children:"Session ID"}),(0,C.jsx)(d.Z,{name:"adMockerSessionId",type:"text",value:A,onChange:e=>y(String(e.currentTarget.value))})]}),(0,C.jsx)("div",{className:f,children:(0,C.jsxs)(h.F,{value:k,onChange:e=>{S(e.currentTarget.value)},children:[(0,C.jsx)("option",{disabled:!0,value:"",children:"Choose a mock"}),O?.map((e=>(0,C.jsxs)("option",{value:e.name,children:[e.name," (",e.group,")"]},e.name)))]})}),(0,C.jsx)(c.$,{size:"small",onClick:()=>{p.D.fetchAdAndEnqueue(k,A).then((()=>{D({message:`${k} inserted`,isError:!1})})).catch((e=>{D({message:`Error inserting ${k}: ${e}`,isError:!0})}))},children:"Insert ad directly"})]}),(0,C.jsx)(l.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Override Country"}),(0,C.jsxs)(n.g,{label:"Calls testingClient.requestOverride with country key",children:[(0,C.jsx)("div",{className:f,children:(0,C.jsxs)(h.F,{value:v,onChange:e=>{x(e.currentTarget.value)},children:[(0,C.jsx)("option",{disabled:!0,value:"",children:"Choose a country"}),(0,C.jsx)("option",{value:"AU",children:"Australia"}),(0,C.jsx)("option",{value:"BR",children:"Brasil"}),(0,C.jsx)("option",{value:"JP",children:"Japan"}),(0,C.jsx)("option",{value:"SE",children:"Sweden"}),(0,C.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,C.jsx)("option",{value:"US",children:"USA"}),(0,C.jsx)("option",{value:"NZ",children:"New Zealand"}),(0,C.jsx)("option",{value:"",children:"Clear"})]})}),(0,C.jsx)(c.$,{size:"small",onClick:()=>{p.D.overrideCountry(v).then((e=>{0===e.status?D({message:`${v} override successful`,isError:!1}):D({message:`Error overriding country: ${e.status}`,isError:!0})}))},children:"OVERRIDE COUNTRY"})]}),(0,C.jsx)(l.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Clear Slot"}),(0,C.jsxs)(n.g,{label:"Calls slotsClient.clearAllAds for the selected slot",children:[(0,C.jsx)("div",{className:f,children:(0,C.jsxs)(h.F,{value:g,onChange:e=>{m(e.currentTarget.value)},children:[(0,C.jsx)("option",{disabled:!0,value:"",children:"Choose a slot"}),(0,C.jsx)("option",{value:"leaderboard",children:"leaderboard"}),(0,C.jsx)("option",{value:"sponsored-playlist",children:"sponsored playlist"}),(0,C.jsx)("option",{value:"billboard",children:"billboard"}),(0,C.jsx)("option",{value:"hpto",children:"hpto"}),(0,C.jsx)("option",{value:"stream",children:"stream"})]})}),(0,C.jsx)(c.$,{size:"small",onClick:()=>{""!==g?Z(g):D({message:"Please select a slot",isError:!0})},children:"CLEAR SLOT"})]}),(0,C.jsx)(l.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Trigger Stream Slot"}),(0,C.jsx)(n.g,{label:"Calls slotsClient.createSlot, adds 20 mins, puts targeting in focus",children:(0,C.jsx)(c.$,{size:"small",onClick:()=>{p.D.queueVideoAd().then((e=>{const s=e[0];s.error?D({message:`Error queuing video ad: ${s?.error}`,isError:!0}):D({message:"Video queued in stream slot",isError:!1})}))},children:"Queue Video Ad"})})]});var q}}}]);
//# sourceMappingURL=1576.js.map