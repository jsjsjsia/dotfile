"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1683],{84816:(e,n,t)=>{t.d(n,{B:()=>Z});var r=t(30758),i=t(62411),s=t(31417),o=t(10994),l=t(10137),c=t(98293),a=t(12864),u=t(53133),d=t(89402),m=t(39566),p=t(44672),f=t(66530),k=t(1599),g=t(46441),h=t(98822),x=t(86070);const b=({currentUserUri:e,uri:n,name:t,divider:o})=>{const p=(0,d.W)(),b=!(0,m.n)(),{isBlocked:C,blockUser:v,unblockUser:j}=function(e,n,t){const[o,l]=(0,r.useState)(!1),a=(0,i.wA)(),d=(0,f.a)(),m=(0,h.A)(),{enqueueSnackbar:p}=(0,u.d)();return(0,r.useEffect)((()=>{e&&(0,g.zP)(m,{currentUserUri:e,uri:n}).then((e=>{if(d()){if(200!==e.status)throw new Error("Invalid response from socialgraph");l(e.body?.[0]?.is_dismissed||!1)}}))}),[e,n,d,m]),{isBlocked:o,blockUser:()=>{e&&a((0,c.zj)(n,t))},unblockUser:async()=>{e&&(await(0,g.kV)(k.n.getInstance(),{currentUserUri:e,uri:n}),p(s.Ru.get("feedback.unblock-user")))}}}(e,n,t),y=(0,r.useCallback)((async()=>{p({targetUri:n,intent:C?"unblock":"block",type:"click"}),C?await j():await v()}),[p,n,v,j,C]);if(!e||e===n)return null;const w=C?s.Ru.get("contextmenu.unblock"):s.Ru.get("contextmenu.block");return(0,x.jsx)(a.D,{role:"menuitem",divider:o,disabled:b,onClick:y,leadingIcon:(0,x.jsx)(l.V,{semanticColor:"textSubdued",size:"small"}),children:w})},C=r.memo((function(e){return(0,x.jsx)(p.pZ,{value:"block-user",children:(0,x.jsx)(b,{...e})})}));var v=t(59521),j=t(9931);const y=r.memo((function({onClick:e,divider:n,canEdit:t}){return e&&t?(0,x.jsx)(p.pZ,{value:"edit-profile",children:(0,x.jsx)(a.D,{role:"menuitem",divider:n,onClick:e,leadingIcon:(0,x.jsx)(j.G,{semanticColor:"textSubdued",size:"small"}),children:s.Ru.get("contextmenu.edit-profile")})}):null}));var w=t(45415),U=t(91488),S=t(36749),E=t(75514),L=t(36061),N=t(21549);const I=()=>{},R=({uri:e,divider:n,onRemoveCallback:t=I})=>{const{spec:o,logger:l}=(0,N.r)(S.F,{data:{uri:e}}),c=(0,d.W)(),u=!(0,m.n)(),p=(0,i.d4)(L.Ht).user,[f,k]=(0,E.Y)(e),g=(0,r.useCallback)((()=>{const n=o.followButtonFactory();c({targetUri:e,intent:f?"unfollow":"follow",type:"click"}),f?(k(!1),l.logInteraction(n.hitUnfollow({itemToBeUnfollowed:e})),t(e)):(k(!0),l.logInteraction(n.hitFollow({itemToBeFollowed:e})))}),[f,l,c,t,k,o,e]);if(p&&p.uri===e)return null;const h=f?s.Ru.get("contextmenu.unfollow"):s.Ru.get("contextmenu.follow");return(0,x.jsx)(a.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:n,disabled:u,onClick:g,leadingIcon:f?(0,x.jsx)(w.M,{semanticColor:"textBrightAccent",size:"small"}):(0,x.jsx)(U.h,{semanticColor:"textSubdued",size:"small"}),children:h})},_=r.memo((function(e){return(0,x.jsx)(p.pZ,{value:"follow-user",children:(0,x.jsx)(R,{...e})})}));var T=t(69476),A=t(15526),M=t(47756),O=t(69693),F=t(10565),P=t(81222);function z({userUri:e}){const{currentSession:n}=(0,O.D)(),t=(0,F.d)(),o=(0,i.wA)(),l=(0,r.useCallback)((()=>{const t=(0,P.Bj)(n?.sessionMembers??[],e);t&&o((0,c.A9)(M.EL.REMOVE_PARTICIPANT,void 0,t))}),[n?.sessionMembers,o,e]),u=(0,P.kt)(t,e);return n?.active&&e&&u?(0,x.jsx)(a.D,{role:"menuitem",onClick:l,leadingIcon:(0,x.jsx)(A.f,{semanticColor:"textSubdued",size:"small"}),children:s.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,x.jsx)(x.Fragment,{})}var B=t(98655),W=t(78774);const Z=r.memo((function({uri:e,onEditProfileCallback:n}){const{user:t}=(0,i.d4)(L.Ht),{spec:r}=(0,W.o)(e),{data:l,loading:c}=(0,B.Z)(g.E$,[{uri:e}]);return c?null:l?(0,x.jsx)(p.pZ,{value:"user",children:(0,x.jsxs)(o.W,{children:[(0,x.jsx)(_,{uri:e}),(0,x.jsx)(z,{userUri:e}),(0,x.jsx)(C,{uri:l.uri,name:l.name,currentUserUri:t?.uri}),(0,x.jsx)(y,{onClick:n,canEdit:!(e!==t?.uri||l.edit_image_disabled&&l.edit_name_disabled)}),(0,x.jsx)(T.P,{spec:r,uri:e,canReportUser:!l.report_abuse_disabled,currentUserUri:t?.uri}),(0,x.jsx)(v.m,{spec:r,uri:e,displayText:s.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},75514:(e,n,t)=>{t.d(n,{Y:()=>c});var r=t(30758),i=t(91008),s=t(65924),o=t(81122),l=t(12130);const c=e=>{const n=(0,o.f)(),[t,c]=(0,r.useState)(!1);if(!(0,i.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const a=(0,r.useCallback)((r=>r&&!t?n.followUsers([e]):!r&&t?n.unfollowUsers([e]):Promise.resolve()),[n,t,e]);return(0,r.useEffect)((()=>{c(!1),n.isFollowing([e]).then((n=>{c(n[e]??!1)}))}),[n,e]),(0,l.N)(s.mc.OPERATION_COMPLETE,(n=>{n.data.uris.includes(e)&&!n.data.error&&(n.data.operation===s.JK.FOLLOW_USER?c(!0):n.data.operation===s.JK.UNFOLLOW_USER&&c(!1))})),[t,a]}},41661:(e,n,t)=>{t.d(n,{N:()=>k,y:()=>g});var r=t(30758),i=t(79344);const s=[[/<iframe[^>]*>/gi,"<span>"],[/<\/iframe>/gi,"</span>"],[/<script[^>]*>/gi,"<span>"],[/<\/script>/gi,"</span>"],[/srcdoc=/gi,"data-invalid="],[/onerror=/gi,"data-invalid="],[/onload=/gi,"data-invalid="],[/<form[^>]*>/gi,"<span>"],[/<\/form>/gi,"</span>"],[/<input[^>]*>/gi,"<span>"],[/<\/input>/gi,"</span>"],[/<link[^>]*>/gi,"<span>"],[/<\/link>/gi,"</span>"]];function o(e){return["http://","https://","#","/","www","spotify:"].some((n=>e.startsWith(n)))?e:""}var l=t(22984),c=t(74786);const a="upb5J45er158T713LxUy";var u=t(49971),d=t(1648),m=t(86070);function p(e,n){return"tagName"in e&&e.tagName===n}function f(e){return"tagName"in e&&"string"==typeof e.tagName}const k=r.memo((function({source:e="",LinkComponent:n,onTimeStampClick:t,onLinkClick:u}){const k=(0,r.useMemo)((()=>function(e){const{LinkComponent:n,onTimeStampClick:t,onLinkClick:r}=e,s={replace:e=>{if(f(e)&&p(e,"a")&&n)try{return(0,m.jsx)(n,{to:o(e.attribs.href),onClick:r,children:(0,i.zd)(e.children.filter(h))})}catch(e){return null}else{if(f(e)&&p(e,"img")){const{src:n,alt:t,width:r,height:i}=e.attribs;return(0,m.jsx)(l._,{src:n,alt:t,loading:"eager",width:r,height:i,className:a})}if(f(e)&&p(e,"time")&&t)return(0,m.jsx)(c.D,{onClick:t,children:(0,i.zd)(e.children.filter(h))})}return e}};return s}({LinkComponent:n,onTimeStampClick:t,onLinkClick:u})),[n,t,u]),g=(0,r.useMemo)((()=>{return(0,i.Ay)((n=e,s.reduce(((e,n)=>{const[t,r]=n;return e.replace(t,r)}),n)),k);var n}),[e,k]);return(0,m.jsx)(d.tH,{fallback:()=>(0,m.jsx)(m.Fragment,{children:e}),children:g})})),g=r.memo((function({source:e="",paragraphClassName:n,variant:t="ballad",semanticColor:i,LinkComponent:s,onLinkClick:o,onTimeStampClick:l,splitter:c=/\n\n/g}){const a=(0,r.useMemo)((()=>e.split(c).map(((e,r)=>(0,m.jsx)(u.Z,{as:"p",className:n,variant:t,semanticColor:i,children:(0,m.jsx)(k,{source:e,LinkComponent:s,onTimeStampClick:l,onLinkClick:o})},r)))),[e,t,i,c,n,s,l,o]);return(0,m.jsx)(m.Fragment,{children:a})}));function h(e){return!(!e||"object"!=typeof e)&&((!("type"in e)||"cdata"!==e.type)&&((!("type"in e)||"root"!==e.type)&&("type"in e&&"comment"===e.type||(!(!("type"in e)||"string"!=typeof e.type||!["tag","script","style"].includes(e.type))||("type"in e&&"directive"===e.type||"type"in e&&"text"===e.type)))))}},74786:(e,n,t)=>{t.d(n,{D:()=>c});var r=t(30758);const i="NkWIcfgnWR9AXfikmWai",s="OvmkrxKmI82x4jlgEZG0";var o=t(49971),l=t(86070);const c=r.memo((function({onClick:e,children:n}){return(0,l.jsx)("button",{"data-testid":"clickable-timestamp",className:s,onClick:()=>{const t=a(n),r=1e3*t.split(":").reverse().reduce(((e,n,t)=>e+parseInt(n,10)*Math.pow(60,t)),0);e(r)},children:(0,l.jsx)(o.Z,{className:i,variant:"ballad",children:n})})}));function a(e){let n="";return r.Children.map(e,(e=>{"string"==typeof e||"number"==typeof e?n+=e:r.isValidElement(e)&&e.props.children&&(n+=a(e.props.children))})),n}},81122:(e,n,t)=>{t.d(n,{f:()=>s});var r=t(24109),i=t(30157);const s=()=>(0,i.N)(r.t)},12130:(e,n,t)=>{t.d(n,{N:()=>s});var r=t(30758),i=t(81122);const s=(e,n)=>{const t=(0,i.f)();(0,r.useEffect)((()=>t.getEvents().addListener(e,n)),[e,t,n])}},81222:(e,n,t)=>{t.d(n,{Bj:()=>i,T4:()=>s,kt:()=>o});var r=t(91008);function i(e,n){if(!n)return null;const t=(0,r.o_h)(n);if(!t||!(0,r.APS)(t))return null;const i=(0,r.XIp)(t.username);return e.find((e=>e.username===i))??null}function s(e){const n=e.getCurrentSession(),t=n?.sessionOwnerId;return t?n.sessionMembers.find((e=>e.id===t))??null:null}function o(e,n){if(!n||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const t=e.getCurrentSession(),r=i(t?.sessionMembers??[],n),o=s(e);return!!r&&r?.username!==o?.username}}}]);
//# sourceMappingURL=1683.js.map