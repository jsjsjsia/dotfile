"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[371,1408],{84816:(e,t,n)=>{n.d(t,{B:()=>$});var r=n(30758),i=n(62411),o=n(31417),s=n(10994),l=n(10137),a=n(98293),u=n(12864),c=n(53133),d=n(89402),m=n(39566),f=n(44672),x=n(66530),S=n(1599),w=n(46441),h=n(98822),E=n(86070);const C=({currentUserUri:e,uri:t,name:n,divider:s})=>{const f=(0,d.W)(),C=!(0,m.n)(),{isBlocked:p,blockUser:A,unblockUser:g}=function(e,t,n){const[s,l]=(0,r.useState)(!1),u=(0,i.wA)(),d=(0,x.a)(),m=(0,h.A)(),{enqueueSnackbar:f}=(0,c.d)();return(0,r.useEffect)((()=>{e&&(0,w.zP)(m,{currentUserUri:e,uri:t}).then((e=>{if(d()){if(200!==e.status)throw new Error("Invalid response from socialgraph");l(e.body?.[0]?.is_dismissed||!1)}}))}),[e,t,d,m]),{isBlocked:s,blockUser:()=>{e&&u((0,a.zj)(t,n))},unblockUser:async()=>{e&&(await(0,w.kV)(S.n.getInstance(),{currentUserUri:e,uri:t}),f(o.Ru.get("feedback.unblock-user")))}}}(e,t,n),v=(0,r.useCallback)((async()=>{f({targetUri:t,intent:p?"unblock":"block",type:"click"}),p?await g():await A()}),[f,t,A,g,p]);if(!e||e===t)return null;const k=p?o.Ru.get("contextmenu.unblock"):o.Ru.get("contextmenu.block");return(0,E.jsx)(u.D,{role:"menuitem",divider:s,disabled:C,onClick:v,leadingIcon:(0,E.jsx)(l.V,{semanticColor:"textSubdued",size:"small"}),children:k})},p=r.memo((function(e){return(0,E.jsx)(f.pZ,{value:"block-user",children:(0,E.jsx)(C,{...e})})}));var A=n(59521),g=n(9931);const v=r.memo((function({onClick:e,divider:t,canEdit:n}){return e&&n?(0,E.jsx)(f.pZ,{value:"edit-profile",children:(0,E.jsx)(u.D,{role:"menuitem",divider:t,onClick:e,leadingIcon:(0,E.jsx)(g.G,{semanticColor:"textSubdued",size:"small"}),children:o.Ru.get("contextmenu.edit-profile")})}):null}));var k=n(45415),b=n(91488),D=n(36749),T=n(75514),O=n(36061),U=n(21549);const _=()=>{},y=({uri:e,divider:t,onRemoveCallback:n=_})=>{const{spec:s,logger:l}=(0,U.r)(D.F,{data:{uri:e}}),a=(0,d.W)(),c=!(0,m.n)(),f=(0,i.d4)(O.Ht).user,[x,S]=(0,T.Y)(e),w=(0,r.useCallback)((()=>{const t=s.followButtonFactory();a({targetUri:e,intent:x?"unfollow":"follow",type:"click"}),x?(S(!1),l.logInteraction(t.hitUnfollow({itemToBeUnfollowed:e})),n(e)):(S(!0),l.logInteraction(t.hitFollow({itemToBeFollowed:e})))}),[x,l,a,n,S,s,e]);if(f&&f.uri===e)return null;const h=x?o.Ru.get("contextmenu.unfollow"):o.Ru.get("contextmenu.follow");return(0,E.jsx)(u.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:t,disabled:c,onClick:w,leadingIcon:x?(0,E.jsx)(k.M,{semanticColor:"textBrightAccent",size:"small"}):(0,E.jsx)(b.h,{semanticColor:"textSubdued",size:"small"}),children:h})},R=r.memo((function(e){return(0,E.jsx)(f.pZ,{value:"follow-user",children:(0,E.jsx)(y,{...e})})}));var j=n(69476),I=n(15526),N=n(47756),L=n(69693),M=n(10565),P=n(81222);function B({userUri:e}){const{currentSession:t}=(0,L.D)(),n=(0,M.d)(),s=(0,i.wA)(),l=(0,r.useCallback)((()=>{const n=(0,P.Bj)(t?.sessionMembers??[],e);n&&s((0,a.A9)(N.EL.REMOVE_PARTICIPANT,void 0,n))}),[t?.sessionMembers,s,e]),c=(0,P.kt)(n,e);return t?.active&&e&&c?(0,E.jsx)(u.D,{role:"menuitem",onClick:l,leadingIcon:(0,E.jsx)(I.f,{semanticColor:"textSubdued",size:"small"}),children:o.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,E.jsx)(E.Fragment,{})}var H=n(98655),F=n(78774);const $=r.memo((function({uri:e,onEditProfileCallback:t}){const{user:n}=(0,i.d4)(O.Ht),{spec:r}=(0,F.o)(e),{data:l,loading:a}=(0,H.Z)(w.E$,[{uri:e}]);return a?null:l?(0,E.jsx)(f.pZ,{value:"user",children:(0,E.jsxs)(s.W,{children:[(0,E.jsx)(R,{uri:e}),(0,E.jsx)(B,{userUri:e}),(0,E.jsx)(p,{uri:l.uri,name:l.name,currentUserUri:n?.uri}),(0,E.jsx)(v,{onClick:t,canEdit:!(e!==n?.uri||l.edit_image_disabled&&l.edit_name_disabled)}),(0,E.jsx)(j.P,{spec:r,uri:e,canReportUser:!l.report_abuse_disabled,currentUserUri:n?.uri}),(0,E.jsx)(A.m,{spec:r,uri:e,displayText:o.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},58757:(e,t,n)=>{n.d(t,{p:()=>b});var r=n(30758),i=n(97500),o=n.n(i),s=n(422),l=n(44481),a=n(17866),u=n(19830);const c="(min-width: 0px)",d="(min-width: 0px) and (max-width: 767px)",m="(min-width: 768px)",f="(min-width: 768px) and (max-width: 1023px)",x="(min-width: 1024px)",S="(min-width: 1024px) and (max-width: 1279px)",w="(min-width: 1280px)",h="(min-width: 1280px) and (max-width: 1919px)",E="(min-width: 1920px)",C="FvfvGU3jvHRskUU9v9_8",p="Q9AlbZn2EGzy3MTWXa8X",A="mxmxS0y8LiwSs5nueKPT",g="GXxVAveNFStY3pBI_NO4",v="eHcXC2s97InYP7rMNT0H";var k=n(86070);const b=(0,r.memo)((function(e){const{children:t,message:n,title:r,linkTitle:i,linkTo:b,onClick:D,renderInline:T=!1}=e,{isXSOnly:O,isSMOnly:U}={isXS:(0,u.U)(c),isXSOnly:(0,u.U)(d),isSM:(0,u.U)(m),isSMOnly:(0,u.U)(f),isMD:(0,u.U)(x),isMDOnly:(0,u.U)(S),isLG:(0,u.U)(w),isLGOnly:(0,u.U)(h),isXL:(0,u.U)(E)},_=O||U;return(0,k.jsxs)("section",{className:o()(C,{[p]:T}),children:[t,(0,k.jsx)(s.E,{as:"h1",variant:_?"titleSmall":"titleMedium",className:g,children:r}),(0,k.jsx)(s.E,{variant:_?"bodySmall":"bodyMedium",className:v,children:n}),i&&(b||D)&&(0,k.jsx)(l.$,{colorSet:"invertedLight",className:A,href:b,onClick:D,component:a.v,children:i})]})}))},2814:(e,t,n)=>{n.d(t,{H:()=>s,g:()=>l});var r=n(30758),i=n(86070);const o=(0,r.createContext)(null);function s({children:e,playlist:t,metadataOptions:n,contentsOptions:s}){return(0,i.jsx)(o.Provider,{value:(0,r.useMemo)((()=>({playlist:t,metadataOptions:n,contentsOptions:s})),[s,n,t]),children:e})}function l(){const e=(0,r.useContext)(o);if(null===e)throw new Error("Trying to use 'ListPlatformDataContext' without 'ListPlatformDataProvider'!");return e}},41522:(e,t,n)=>{n.d(t,{d:()=>s,j:()=>l});var r=n(30758),i=n(86070);const o=(0,r.createContext)({setFilterPredicate:()=>{throw new Error("setFilterPredicate must be used within a ListPlatformFilterPredicatesProvider")},filterPredicate:null}),s=(0,r.memo)((function({children:e}){const[t,n]=(0,r.useState)(null),s=(0,r.useMemo)((()=>({filterPredicate:t,setFilterPredicate:n})),[t]);return(0,i.jsx)(o.Provider,{value:s,children:e})}));function l(){return(0,r.useContext)(o)}},91797:(e,t,n)=>{n.d(t,{K:()=>d,l:()=>c});var r=n(30758),i=n(2814),o=n(13295),s=n(29074),l=n(89273),a=n(86070);const u=(0,r.createContext)(null);function c({children:e}){const{playlist:t,contentsOptions:n}=(0,i.g)(),c=(0,s.m)(),d=(0,r.useCallback)((async(e,r)=>await c.getContents(t.metadata.uri,{...n,offset:e,limit:r})),[c,n,t.metadata.uri]),m=(0,o.E)({nrItems:t.contents.totalLength,fetch:d,limit:50,initialItems:t.contents.items});return(0,l.H)(t.metadata.uri,m.invalidateCache),(0,a.jsx)(u.Provider,{value:m,children:e})}function d(){const e=(0,r.useContext)(u);if(null===e)throw new Error("Trying to use 'ListPlatformItemsContext' without 'ListPlatformItemsProvider'!");return e}},79098:(e,t,n)=>{n.d(t,{Z:()=>l,k:()=>a});var r=n(30758),i=n(26413),o=n(86070);const s=(0,r.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ListPlatformSortProvider")},sortState:null}),l=r.memo((function({uri:e,children:t}){return(0,o.jsx)(i.E,{uri:e,defaultState:null,sortContext:s,children:t})}));function a(){return(0,r.useContext)(s)}},61295:(e,t,n)=>{n.d(t,{W:()=>w});var r=n(30758),i=n(31417),o=n(81067),s=n(92202),l=n(39795),a=n(2814),u=n(41522),c=n(91797),d=n(79098);var m=n(57764),f=n(29074),x=n(86070);const S=({children:e,uri:t})=>{const n=(0,f.m)().getCapabilities(),{filter:c}=(0,r.useContext)(l.g),{sortState:S}=(0,d.k)(),{filterPredicate:w}=(0,u.j)(),{metadataOptions:h,contentsOptions:E}=((e,t,n)=>(0,r.useMemo)((()=>({metadataOptions:{decorateFormatListData:!0,withSync:!0,hydrateCollaboratorsWithMembers:!0},contentsOptions:{offset:0,limit:25,filter:e,sort:t??void 0,filterPredicates:n?[n]:[]}})),[e,t,n]))(c,S,w),{data:C,isLoading:p,isError:A}=(0,m.W)(t,h,E);return!C||p?(0,x.jsx)(s.LoadingPage,{hasError:A,errorMessage:i.Ru.get("error.not_found.title.playlist"),loadOffline:n.canModifyOffline}):C.metadata.permissions&&!C.metadata.permissions.canView?(0,x.jsx)(o.Z,{uri:t}):(0,x.jsx)(a.H,{playlist:C,metadataOptions:h,contentsOptions:E,children:e})},w=({children:e,uri:t})=>(0,x.jsx)(l.s,{uri:t,children:(0,x.jsx)(u.d,{children:(0,x.jsx)(d.Z,{uri:t,children:(0,x.jsx)(S,{uri:t,children:(0,x.jsx)(c.l,{children:e})})})})})},75514:(e,t,n)=>{n.d(t,{Y:()=>a});var r=n(30758),i=n(91008),o=n(65924),s=n(81122),l=n(12130);const a=e=>{const t=(0,s.f)(),[n,a]=(0,r.useState)(!1);if(!(0,i.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const u=(0,r.useCallback)((r=>r&&!n?t.followUsers([e]):!r&&n?t.unfollowUsers([e]):Promise.resolve()),[t,n,e]);return(0,r.useEffect)((()=>{a(!1),t.isFollowing([e]).then((t=>{a(t[e]??!1)}))}),[t,e]),(0,l.N)(o.mc.OPERATION_COMPLETE,(t=>{t.data.uris.includes(e)&&!t.data.error&&(t.data.operation===o.JK.FOLLOW_USER?a(!0):t.data.operation===o.JK.UNFOLLOW_USER&&a(!1))})),[n,u]}},74786:(e,t,n)=>{n.d(t,{D:()=>a});var r=n(30758);const i="NkWIcfgnWR9AXfikmWai",o="OvmkrxKmI82x4jlgEZG0";var s=n(49971),l=n(86070);const a=r.memo((function({onClick:e,children:t}){return(0,l.jsx)("button",{"data-testid":"clickable-timestamp",className:o,onClick:()=>{const n=u(t),r=1e3*n.split(":").reverse().reduce(((e,t,n)=>e+parseInt(t,10)*Math.pow(60,n)),0);e(r)},children:(0,l.jsx)(s.Z,{className:i,variant:"ballad",children:t})})}));function u(e){let t="";return r.Children.map(e,(e=>{"string"==typeof e||"number"==typeof e?t+=e:r.isValidElement(e)&&e.props.children&&(t+=u(e.props.children))})),t}},47972:(e,t,n)=>{n.d(t,{d:()=>S});var r=n(30758),i=n(68448),o=n(87621),s=n(31417),l=n(67239),a=n(79098),u=n(59964),c=n(29074),d=n(86070);const m=r.memo((function({sortOptions:e,defaultSortField:t,enableViewModeMenu:n}){const i=(0,c.m)(),{canSort:o}=i.getCapabilities(),{sortState:m,setSortState:f}=(0,a.k)(),x=(0,r.useCallback)((e=>{const t=u.nw[e];f((0,u.Wc)(t,m))}),[f,m]),S=e.map((e=>u.kA[e]));"custom-order"===t&&S.unshift({key:"custom-order",value:s.Ru.get("sort.custom-order")});const w=u.kA[m?.field??t];return o?(0,d.jsx)(l.g,{options:S,onSelect:x,selected:w,sortOrder:(0,u.Qi)(m?.order??null),heading:s.Ru.get("drop_down.sort_by"),enableViewModeMenu:n}):null}));var f=n(21549);const x="cRlDGz_DCN_UOCt4Khg1",S=r.memo((function({filterPlaceholder:e,sortOptions:t,defaultSortField:n,enableViewModeMenu:s=!1}){const l=(0,c.m)(),{canSort:a,canFilter:u}=l.getCapabilities(),{spec:S,logger:w}=(0,f.r)(i.E,{}),h=(0,r.useCallback)((()=>{w.logInteraction(S.filterFieldFactory().keyStrokeFilter())}),[w,S]),E=(0,r.useCallback)((()=>{w.logInteraction(S.filterFieldFactory().hitClearFilter())}),[w,S]);return(0,d.jsxs)("div",{className:x,children:[u?(0,d.jsx)(r.Suspense,{fallback:null,children:(0,d.jsx)(o.S,{placeholder:e,onFilter:h,onClear:E})}):null,a?(0,d.jsx)(m,{sortOptions:t,defaultSortField:n,enableViewModeMenu:s}):null]})}))},72187:(e,t,n)=>{n.d(t,{g:()=>r.g});var r=n(2814)},59964:(e,t,n)=>{n.d(t,{Ap:()=>w,Qi:()=>m,Wc:()=>u,g6:()=>S,hK:()=>h,kA:()=>c,nw:()=>d});var r=n(31417),i=n(4266),o=n(34939);const s=[o.nw.ADDED_AT,o.nw.PUBLISH_DATE],l=e=>s.includes(e)?o.xB.DESC:o.xB.ASC,a={[o.xB.ASC]:o.xB.DESC,[o.xB.DESC]:o.xB.ASC},u=(e,t)=>null===e?null:t?.field!==e?{field:e,order:l(e)}:{field:e,order:a[t.order]},c={[o.nw.TITLE]:{key:"title",get value(){return r.Ru.get("sort.title")}},[o.nw.ARTIST]:{key:"artist",get value(){return r.Ru.get("sort.artist")}},[o.nw.ALBUM]:{key:"album",get value(){return r.Ru.get("sort.album")}},[o.nw.ADDED_BY]:{key:"added-by",get value(){return r.Ru.get("sort.added-by")}},[o.nw.ADDED_AT]:{key:"added-at",get value(){return r.Ru.get("collection.sort.recently-added")}},[o.nw.DURATION]:{key:"duration",get value(){return r.Ru.get("sort.duration")}},[o.nw.SHOW_NAME]:{key:"show-name",get value(){return r.Ru.get("collection.sort.creator")}},[o.nw.PUBLISH_DATE]:{key:"publish-date",get value(){return r.Ru.get("tracklist.header.release-date")}},"custom-order":{key:"custom-order",get value(){return r.Ru.get("sort.custom-order")}}},d={title:o.nw.TITLE,artist:o.nw.ARTIST,album:o.nw.ALBUM,"added-by":o.nw.ADDED_BY,"added-at":o.nw.ADDED_AT,duration:o.nw.DURATION,"show-name":o.nw.SHOW_NAME,"publish-date":o.nw.PUBLISH_DATE,"custom-order":null};function m(e){return null===e?i.H.NONE:e===o.xB.ASC?i.H.ASC:i.H.DESC}const f={[i.$.TITLE_AND_ARTIST]:[o.nw.TITLE,o.nw.ARTIST],[i.$.TITLE]:[o.nw.TITLE],[i.$.ADDED_BY]:[o.nw.ADDED_BY],[i.$.ADDED_AT]:[o.nw.ADDED_AT],[i.$.DURATION]:[o.nw.DURATION],[i.$.ARTIST]:[o.nw.ARTIST],[i.$.ALBUM]:[o.nw.ALBUM],[i.$.ALBUM_OR_PODCAST]:[o.nw.ALBUM,o.nw.SHOW_NAME],[i.$.ALBUM_OR_SHOW]:[o.nw.ALBUM,o.nw.SHOW_NAME],[i.$.ACTIONS]:[],[i.$.RELEASE_DATE]:[o.nw.PUBLISH_DATE],[i.$.INDEX]:[],[i.$.PLAYS]:[],[i.$.ADD]:[],[i.$.EVENT_DATE]:[],[i.$.EVENT_INFO]:[],[i.$.CONCERT]:[],[i.$.CONCERT_VENUE]:[],[i.$.TITLE_AND_AUTHOR]:[o.nw.TITLE],[i.$.AUTHOR]:[],[i.$.BPM]:[],[i.$.KEY]:[],[i.$.VIBE]:[]},x={[i.H.NONE]:null,[i.H.DESC]:o.xB.DESC,[i.H.ASC]:o.xB.ASC,[i.H.SECONDARY_DESC]:o.xB.DESC,[i.H.SECONDARY_ASC]:o.xB.ASC},S=e=>e.filter((e=>f[e].length>0)),w=(e,t)=>{const n=e.find((e=>t?.field&&f[e].includes(t.field)));if(!n||!t?.field)return{column:null,order:i.H.ASC};return f[n].indexOf(t.field)>0?{column:n,order:t.order===o.xB.ASC?i.H.SECONDARY_ASC:i.H.SECONDARY_DESC}:{column:n,order:t.order===o.xB.ASC?i.H.ASC:i.H.DESC}},h=(e,t,n)=>{const r=f[e].length>1?5:3;let o=null,s=null;if(e===t.column){let l=(t.order+1)%r;l!==i.H.NONE||n||(l+=1);const a=[i.H.SECONDARY_ASC,i.H.SECONDARY_DESC].includes(l)?1:0;o=f[e][a],s=x[l]}else o=f[e][0],s=x[i.H.ASC];return null===s?null:{field:o,order:s}}},84291:(e,t,n)=>{n.d(t,{f:()=>l,z:()=>s});var r=n(30758),i=n(85505),o=n(47095);function s(e,t=i.l0o){const n=(0,o.as)();return(0,r.useEffect)((()=>(e&&n((0,o.Mo)(e)),()=>{n((0,o.Hf)())})),[e,n]),e||t}const l=({color:e,fallbackColor:t})=>(s(e,t),null)},81122:(e,t,n)=>{n.d(t,{f:()=>o});var r=n(24109),i=n(30157);const o=()=>(0,i.N)(r.t)},12130:(e,t,n)=>{n.d(t,{N:()=>o});var r=n(30758),i=n(81122);const o=(e,t)=>{const n=(0,i.f)();(0,r.useEffect)((()=>n.getEvents().addListener(e,t)),[e,n,t])}},99248:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(30758),i=n(20784);function o(e,t){const n=(0,i.f)(),o=(0,r.useRef)(t);(0,r.useLayoutEffect)((()=>{o.current=t})),(0,r.useEffect)((()=>n.getEvents().addListener(e,(e=>o.current(e)))),[e,n])}},81222:(e,t,n)=>{n.d(t,{Bj:()=>i,T4:()=>o,kt:()=>s});var r=n(91008);function i(e,t){if(!t)return null;const n=(0,r.o_h)(t);if(!n||!(0,r.APS)(n))return null;const i=(0,r.XIp)(n.username);return e.find((e=>e.username===i))??null}function o(e){const t=e.getCurrentSession(),n=t?.sessionOwnerId;return n?t.sessionMembers.find((e=>e.id===n))??null:null}function s(e,t){if(!t||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const n=e.getCurrentSession(),r=i(n?.sessionMembers??[],t),s=o(e);return!!r&&r?.username!==s?.username}}}]);
//# sourceMappingURL=371.js.map