"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[42],{84816:(e,t,i)=>{i.d(t,{B:()=>G});var n=i(30758),r=i(62411),l=i(31417),o=i(10994),s=i(10137),a=i(98293),d=i(12864),c=i(53133),u=i(89402),m=i(39566),b=i(44672),x=i(66530),h=i(1599),g=i(46441),v=i(98822),E=i(86070);const p=({currentUserUri:e,uri:t,name:i,divider:o})=>{const b=(0,u.W)(),p=!(0,m.n)(),{isBlocked:f,blockUser:j,unblockUser:w}=function(e,t,i){const[o,s]=(0,n.useState)(!1),d=(0,r.wA)(),u=(0,x.a)(),m=(0,v.A)(),{enqueueSnackbar:b}=(0,c.d)();return(0,n.useEffect)((()=>{e&&(0,g.zP)(m,{currentUserUri:e,uri:t}).then((e=>{if(u()){if(200!==e.status)throw new Error("Invalid response from socialgraph");s(e.body?.[0]?.is_dismissed||!1)}}))}),[e,t,u,m]),{isBlocked:o,blockUser:()=>{e&&d((0,a.zj)(t,i))},unblockUser:async()=>{e&&(await(0,g.kV)(h.n.getInstance(),{currentUserUri:e,uri:t}),b(l.Ru.get("feedback.unblock-user")))}}}(e,t,i),y=(0,n.useCallback)((async()=>{b({targetUri:t,intent:f?"unblock":"block",type:"click"}),f?await w():await j()}),[b,t,j,w,f]);if(!e||e===t)return null;const A=f?l.Ru.get("contextmenu.unblock"):l.Ru.get("contextmenu.block");return(0,E.jsx)(d.D,{role:"menuitem",divider:o,disabled:p,onClick:y,leadingIcon:(0,E.jsx)(s.V,{semanticColor:"textSubdued",size:"small"}),children:A})},f=n.memo((function(e){return(0,E.jsx)(b.pZ,{value:"block-user",children:(0,E.jsx)(p,{...e})})}));var j=i(59521),w=i(9931);const y=n.memo((function({onClick:e,divider:t,canEdit:i}){return e&&i?(0,E.jsx)(b.pZ,{value:"edit-profile",children:(0,E.jsx)(d.D,{role:"menuitem",divider:t,onClick:e,leadingIcon:(0,E.jsx)(w.G,{semanticColor:"textSubdued",size:"small"}),children:l.Ru.get("contextmenu.edit-profile")})}):null}));var A=i(45415),R=i(91488),_=i(36749),k=i(75514),I=i(36061),N=i(21549);const T=()=>{},C=({uri:e,divider:t,onRemoveCallback:i=T})=>{const{spec:o,logger:s}=(0,N.r)(_.F,{data:{uri:e}}),a=(0,u.W)(),c=!(0,m.n)(),b=(0,r.d4)(I.Ht).user,[x,h]=(0,k.Y)(e),g=(0,n.useCallback)((()=>{const t=o.followButtonFactory();a({targetUri:e,intent:x?"unfollow":"follow",type:"click"}),x?(h(!1),s.logInteraction(t.hitUnfollow({itemToBeUnfollowed:e})),i(e)):(h(!0),s.logInteraction(t.hitFollow({itemToBeFollowed:e})))}),[x,s,a,i,h,o,e]);if(b&&b.uri===e)return null;const v=x?l.Ru.get("contextmenu.unfollow"):l.Ru.get("contextmenu.follow");return(0,E.jsx)(d.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:t,disabled:c,onClick:g,leadingIcon:x?(0,E.jsx)(A.M,{semanticColor:"textBrightAccent",size:"small"}):(0,E.jsx)(R.h,{semanticColor:"textSubdued",size:"small"}),children:v})},L=n.memo((function(e){return(0,E.jsx)(b.pZ,{value:"follow-user",children:(0,E.jsx)(C,{...e})})}));var O=i(69476),S=i(15526),U=i(47756),D=i(69693),M=i(10565),P=i(81222);function B({userUri:e}){const{currentSession:t}=(0,D.D)(),i=(0,M.d)(),o=(0,r.wA)(),s=(0,n.useCallback)((()=>{const i=(0,P.Bj)(t?.sessionMembers??[],e);i&&o((0,a.A9)(U.EL.REMOVE_PARTICIPANT,void 0,i))}),[t?.sessionMembers,o,e]),c=(0,P.kt)(i,e);return t?.active&&e&&c?(0,E.jsx)(d.D,{role:"menuitem",onClick:s,leadingIcon:(0,E.jsx)(S.f,{semanticColor:"textSubdued",size:"small"}),children:l.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,E.jsx)(E.Fragment,{})}var Y=i(98655),z=i(78774);const G=n.memo((function({uri:e,onEditProfileCallback:t}){const{user:i}=(0,r.d4)(I.Ht),{spec:n}=(0,z.o)(e),{data:s,loading:a}=(0,Y.Z)(g.E$,[{uri:e}]);return a?null:s?(0,E.jsx)(b.pZ,{value:"user",children:(0,E.jsxs)(o.W,{children:[(0,E.jsx)(L,{uri:e}),(0,E.jsx)(B,{userUri:e}),(0,E.jsx)(f,{uri:s.uri,name:s.name,currentUserUri:i?.uri}),(0,E.jsx)(y,{onClick:t,canEdit:!(e!==i?.uri||s.edit_image_disabled&&s.edit_name_disabled)}),(0,E.jsx)(O.P,{spec:n,uri:e,canReportUser:!s.report_abuse_disabled,currentUserUri:i?.uri}),(0,E.jsx)(j.m,{spec:n,uri:e,displayText:l.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},81419:(e,t,i)=>{i.d(t,{O:()=>b});var n=i(422),r=i(44481),l=i(86604),o=i(98712),s=i(51354),a=i(75342),d=i(86070);const c={[o.E.MEDIUM]:"titleMedium",[o.E.LARGE]:"titleMedium",[o.E.XLARGE]:"headlineMedium"},u={[o.E.LARGE]:"bodyMedium",[o.E.XLARGE]:"bodyMediumBold"},m={[o.E.LARGE]:"bodySmall",[o.E.XLARGE]:"bodySmall"},b=({title:e,subtitle:t,body:i,footnote:o,buttonText:b,callToActionClicked:x})=>{const h=(0,s.y)(),g=h&&c[h]||"titleSmall",v=h&&u[h]||"bodySmall",E=h&&m[h]||"marginal";return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.E,{as:"h1",variant:g,semanticColor:"textBase",className:a.A.title,children:e}),(0,d.jsx)(n.E,{as:"h2",variant:v,semanticColor:"textSubdued",className:a.A.subtitle,children:t}),i,x&&(0,d.jsx)(r.$,{className:a.A.button,colorSet:"invertedLight",onClick:x,"data-testid":l.OL,children:b}),o&&(0,d.jsx)(n.E,{as:"p",variant:E,semanticColor:"textSubdued",className:a.A.note,children:o})]})}},15744:(e,t,i)=>{i.d(t,{d:()=>f});var n=i(97500),r=i.n(n),l=i(31417),o=i(41616),s=i(15292),a=i(81419),d=i(86604);const c="gJmoZouW_m4rUBRFHmu7",u="r4j9hiYJ8q0SQpEsgvSh";var m=i(86070);const b=e=>(0,m.jsx)("div",{className:c,children:(0,m.jsx)("div",{className:u,children:(0,m.jsx)("svg",{width:e.iconSize,height:e.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var x=i(98712),h=i(51354),g=i(75342);const v={name:"",username:"",image_url:null,hash:""},E={[x.E.MEDIUM]:164,[x.E.LARGE]:164,[x.E.XLARGE]:270},p=(e,t)=>(0,m.jsx)(o.e,{label:l.Ru.get("web-player.blend.invite.button-title"),images:[],width:e,userIconSize:"xxlarge",customPlaceholder:(0,m.jsx)(b,{iconSize:t}),piled:!0}),f=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=!!e.members?.length,c=n&&e.members?.[0]||e.recipient||v,u=n&&e.recipient||null,b=(0,h.y)(),x=b&&E[b]||128,f=Math.round(.475*x);return(0,m.jsxs)("div",{className:r()(g.A.container,g.A.TwoUsers),"data-testid":d.xg,ref:i,children:[(0,m.jsx)(s.Q,{children:l.Ru.get("blend.invite.page-title")}),(0,m.jsxs)("div",{className:g.A.facepile,children:[(0,m.jsx)(o.e,{label:c.name,images:[{url:c.image_url??"",width:x,height:x}],width:x,userIconSize:"xxlarge"}),u?(0,m.jsx)(o.e,{label:u.name,images:[{url:u.image_url??"",width:x,height:x}],width:x,userIconSize:"xxlarge",piled:!0}):p(x,f)]}),(0,m.jsx)(a.O,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,buttonText:e.button_text,callToActionClicked:t})]})}},48922:(e,t,i)=>{i.d(t,{A:()=>n});const n=()=>{const e=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(e)}`,null}},75514:(e,t,i)=>{i.d(t,{Y:()=>a});var n=i(30758),r=i(91008),l=i(65924),o=i(81122),s=i(12130);const a=e=>{const t=(0,o.f)(),[i,a]=(0,n.useState)(!1);if(!(0,r.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const d=(0,n.useCallback)((n=>n&&!i?t.followUsers([e]):!n&&i?t.unfollowUsers([e]):Promise.resolve()),[t,i,e]);return(0,n.useEffect)((()=>{a(!1),t.isFollowing([e]).then((t=>{a(t[e]??!1)}))}),[t,e]),(0,s.N)(l.mc.OPERATION_COMPLETE,(t=>{t.data.uris.includes(e)&&!t.data.error&&(t.data.operation===l.JK.FOLLOW_USER?a(!0):t.data.operation===l.JK.UNFOLLOW_USER&&a(!1))})),[i,d]}},86604:(e,t,i)=>{i.d(t,{OL:()=>s,VE:()=>n,ev:()=>l,rg:()=>o,xg:()=>r});const n="blend-deleted-container",r="blend-two-user-container",l="blend-multi-user-container",o="blend-full-container",s="blend-cta-button"},42738:(e,t,i)=>{i.d(t,{B6:()=>s,OE:()=>o,YW:()=>l,pd:()=>r});var n=i(72671);let r=function(e){return e.PENDING_INVITATION="PENDING_INVITATION",e.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",e.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",e.MAX_MEMBERS="MAX_MEMBERS",e.ALREADY_JOINED="ALREADY_JOINED",e.DELETED="DELETED",e}({});const l=(e,t)=>e.build().withHost(n.t2).withPath(`/v3/view-invitation/${encodeURIComponent(t)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(e.locale).send(),o=(e,t)=>e.build().withHost(n.t2).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(t)}`).withEndpointIdentifier("join/{invitationId}").send(),s=e=>e.build().withHost(n.t2).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},47812:(e,t,i)=>{i.d(t,{G:()=>l});var n=i(98712),r=i(66583);const l=()=>(0,r.x)({[n.E.SMALL]:536,[n.E.MEDIUM]:792,[n.E.LARGE]:1048,[n.E.XLARGE]:1688})},42364:(e,t,i)=>{i.d(t,{y:()=>u});var n=i(30758),r=i(93240),l=i(62411),o=i(31417),s=i(42738),a=i(36061),d=i(98822),c=i(33234);function u(e,t){const{user:i}=(0,l.d4)(a.Ht),{enqueueSnackbar:u}=(0,r.dh)(),m=(0,d.A)(),b=(0,n.useCallback)((async()=>{const e=await(0,s.B6)(m),t=e.body?.invite;if(!t)throw new Error("unable to generate invite link");return i?.display_name?o.Ru.get("blend.invite.body-with-name",i.display_name,e.body?.invite):o.Ru.get("blend.invite.body-without-name",e.body?.invite)}),[i?.display_name,m]);return async()=>{try{await(0,c.l)(b()),u(o.Ru.get("feedback.link-copied"))}catch{u(o.Ru.get("error.generic"))}if(e&&t){const i=e.inviteButtonFactory().hitCopyToClipboard();t.logInteraction(i)}}}},32690:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var n=i(30758),r=i(62411),l=i(73123),o=i(31417),s=i(15292),a=i(15744),d=i(48922),c=i(42738),u=i(47812),m=i(42364),b=i(36061),x=i(51354),h=i(21549),g=i(16151),v=i(63096),E=i(86070);const p={page_type:c.pd.PENDING_INVITATION,get title(){return o.Ru.get("web-player.blend.group-invite.header")},get subtitle(){return o.Ru.get("web-player.blend.duo-invite.description")},get button_text(){return o.Ru.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},f=()=>{const{spec:e,logger:t}=(0,h.r)(l.f,{}),i=(0,m.y)(e,t),{ref:c,breakpoint:f}=(0,u.G)(),{user:j}=(0,r.d4)(b.Ht),w=j?.uri?(0,g.v)(j?.uri):"",y=(e=>({...p,members:[e],footnote:o.Ru.get("web-player.blend.group-invite.warning")}))({name:j?.display_name||"",username:w,image_url:(0,v.g)(j?.images)?.url||null,hash:""});return j?(0,E.jsxs)(n.Suspense,{fallback:null,children:[(0,E.jsx)(s.Q,{children:o.Ru.get("web-player.blend.invite.page-title")}),(0,E.jsx)(x.o.Provider,{value:f,children:(0,E.jsx)(a.d,{invitation:y,callToActionClicked:i,breakpointEltRef:c})})]}):(0,E.jsx)(d.A,{})}},98582:(e,t,i)=>{i.r(t),i.d(t,{default:()=>q});var n=i(30758),r=i(62411),l=i(85387),o=i(36558),s=i(14343),a=i(73123),d=i(91008),c=i(31417),u=i(92202),m=i(81231),b=i(81419),x=i(86604),h=i(75342),g=i(86070);const v=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>(0,g.jsxs)("div",{className:h.A.container,"data-testid":x.rg,ref:i,children:[(0,g.jsx)(m.u,{size:"xxlarge"}),(0,g.jsx)(b.O,{title:e.title,subtitle:e.subtitle,buttonText:e.button_text,footnote:null,callToActionClicked:t})]});var E=i(15292),p=i(97500),f=i.n(p),j=i(422),w=i(41616),y=i(65462),A=i(84816),R=i(21082);const _="HKAYWYmxd5Ie8WSi0a4y",k="i52u_T3b50wraodIaORk",I="xakiNVMlUf6geF67FEgy",N="IRhTesoeIiwswlly0Dvg",T="LNJzE17iskXWmfKAzY4U",C="qzBr7X7cdLUhWdk0r8lL",L=({uri:e,imageUrl:t,name:i})=>(0,g.jsx)("li",{children:(0,g.jsx)(y.h,{menu:(0,g.jsx)(A.B,{uri:e}),children:(0,g.jsx)(R.N,{to:e,children:(0,g.jsxs)("div",{className:N,children:[(0,g.jsx)(w.e,{images:[{url:t,width:null,height:null}],label:i,width:32,userIconSize:"medium",className:T}),(0,g.jsx)(j.E,{variant:"bodySmallBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:i})]})})})}),O=({members:e,headingText:t,className:i})=>(0,g.jsxs)("div",{className:f()(_,i),children:[(0,g.jsx)("div",{children:(0,g.jsx)(j.E,{as:"h4",variant:"marginalBold",semanticColor:"textSubdued",className:k,children:t})}),(0,g.jsx)("ul",{className:I,children:e&&e.map((e=>(0,g.jsx)(L,{imageUrl:e.image_url||"",name:e.name,uri:(0,d.Qjr)(e.username).toURI()},e.username)))}),(0,g.jsx)("div",{className:C})]}),S=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=e.members||[],r=(0,g.jsx)("div",{className:h.A.userListContainer,"data-testid":x.ev,children:(0,g.jsx)(O,{className:h.A.userList,headingText:e.members_title,members:n})});return(0,g.jsxs)("div",{className:h.A.container,ref:i,children:[(0,g.jsx)(E.Q,{children:c.Ru.get("blend.join.title")}),(0,g.jsx)(b.O,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,body:r,buttonText:e.button_text,callToActionClicked:t})]})};var U=i(15744),D=i(42738),M=i(47812),P=i(42364),B=i(53133),Y=i(98822);var z=i(38501),G=i(51354),F=i(98655),V=i(21549);const J=({invitationId:e})=>{const t=(0,l.Zp)(),i=(0,s.NC)(z.CXJ),{data:r,error:m,loading:E}=(0,F.Z)(D.YW,[e]),{spec:p,logger:f}=(0,V.r)(a.f,{}),j=(0,P.y)(p,f),w=function(e,t,i){const{enqueueSnackbar:n}=(0,B.d)(),r=(0,Y.A)(),o=(0,l.Zp)();return async()=>{try{const t=await(0,D.OE)(r,e),i=(0,d.o_h)(t?.body.playlist_uri).toURLPath(!0);if(!i)throw new Error("unable to join");o(i,{replace:!0})}catch{n(c.Ru.get("error.request-playlist-failure"))}if(t&&i){const e=t.joinButtonFactory().hitCreatePlaylist();i.logInteraction(e)}}}(e,p,f),{ref:y,breakpoint:A}=(0,M.G)();(0,n.useEffect)((()=>{if(r?.body?.page_type===D.pd.ALREADY_JOINED){const e=(0,d.o_h)(r?.body.playlist_uri)?.toURLPath(!0);e&&t(e,{replace:!0})}}),[r?.body?.page_type,r?.body?.playlist_uri,t]);const R=null===r||!r.body;if(R||E||m)return(0,g.jsx)(u.LoadingPage,{timeoutInMs:1e3,hasError:!!m||!E&&R,errorMessage:c.Ru.get("error.generic")});const _=r?.body.members?.length||0,k=i===z.YVK.TWO_USER;switch(r?.body.page_type){case D.pd.DELETED:return(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsxs)("div",{className:h.A.container,ref:y,"data-testid":x.VE,children:[(0,g.jsx)(o.x,{size:"xxlarge"}),(0,g.jsx)(b.O,{title:r.body.title,subtitle:r.body.subtitle,buttonText:r.body.button_text,footnote:r.body.footnote,callToActionClicked:j})]})});case D.pd.ALREADY_JOINED:return(0,g.jsx)(u.LoadingPage,{hasError:!1,errorMessage:c.Ru.get("error.request-playlist-failure")});case D.pd.READY_TO_JOIN_EMPTY_BLEND:return(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(U.d,{invitation:r.body,breakpointEltRef:y,callToActionClicked:w})});case D.pd.READY_TO_JOIN_ALREADY_CREATED_BLEND:return k&&_>=2?(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(v,{invitation:{...r.body,title:c.Ru.get("blend.link-invialid.header"),subtitle:c.Ru.get("blend.link-invalid.subtitle"),button_text:c.Ru.get("blend.invite.button-title")},callToActionClicked:j,breakpointEltRef:y})}):(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(S,{invitation:r.body,callToActionClicked:w,breakpointEltRef:y})});case D.pd.MAX_MEMBERS:return(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(v,{invitation:r.body,callToActionClicked:j,breakpointEltRef:y})});case D.pd.PENDING_INVITATION:return(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(U.d,{invitation:r.body,callToActionClicked:j,breakpointEltRef:y})});default:return(0,g.jsx)(u.LoadingPage,{timeoutInMs:1e3,hasError:!0,errorMessage:c.Ru.get("error.generic")})}};var W=i(48922),X=i(36061);const H=({invitationId:e})=>{const{user:t}=(0,r.d4)(X.Ht);return t?(0,g.jsx)(n.Suspense,{fallback:null,children:(0,g.jsx)(J,{invitationId:e})}):(0,g.jsx)(W.A,{})},q=(0,n.memo)((()=>{const{invitationId:e=""}=(0,l.g)();return(0,g.jsx)(H,{invitationId:e})}))},81122:(e,t,i)=>{i.d(t,{f:()=>l});var n=i(24109),r=i(30157);const l=()=>(0,r.N)(n.t)},12130:(e,t,i)=>{i.d(t,{N:()=>l});var n=i(30758),r=i(81122);const l=(e,t)=>{const i=(0,r.f)();(0,n.useEffect)((()=>i.getEvents().addListener(e,t)),[e,i,t])}},81222:(e,t,i)=>{i.d(t,{Bj:()=>r,T4:()=>l,kt:()=>o});var n=i(91008);function r(e,t){if(!t)return null;const i=(0,n.o_h)(t);if(!i||!(0,n.APS)(i))return null;const r=(0,n.XIp)(i.username);return e.find((e=>e.username===r))??null}function l(e){const t=e.getCurrentSession(),i=t?.sessionOwnerId;return i?t.sessionMembers.find((e=>e.id===i))??null:null}function o(e,t){if(!t||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const i=e.getCurrentSession(),n=r(i?.sessionMembers??[],t),o=l(e);return!!n&&n?.username!==o?.username}},75342:(e,t,i)=>{i.d(t,{A:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}}}]);
//# sourceMappingURL=xpui-routes-blend.js.map