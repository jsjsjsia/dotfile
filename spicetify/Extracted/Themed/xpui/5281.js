"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5281],{45664:(e,t,i)=>{i.d(t,{M:()=>E,f:()=>I});var a=i(30758),n=i(97500),s=i.n(n),r=i(93523),l=i(1820),o=i(46607),d=i(31417),c=i(50324),u=i(622),p=i(35035);var y=i(99701),m=i(50342),g=i(94141),b=i(6038),f=i(48014),T=i(39566),h=i(13787),x=i(69285);const w="x-downloadButton-DownloadButton",k="x-downloadButton-button",R="x-downloadButton-cancelDownload",A="x-downloadButton-progress";var S=i(86070);let E=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const C=e=>{const{currentTarget:t,detail:i}=e;i>0&&t&&t.blur()},I=({uri:e,isFollowing:t,onFollow:i,size:n=E.sm,className:I,onClick:N=(()=>{}),showUpsell:P=!0,canDownload:$=!0,condensedAll:v,condensed:O})=>{const[_,j]=(0,a.useState)(!1),{capability:V,availability:D,addDownload:L}=(0,h.$)(e,$),M=!(0,T.n)(),B=(0,f.V)(),K=(0,x.e)(e);((e,t)=>{const i=(0,c.i)(),n=(0,a.useRef)(!1);(0,a.useEffect)((()=>{e===p.kw.DOWNLOADING&&!1===n.current&&(n.current=!0,i.say(d.Ru.get("download.downloading",t.totalItems)))}),[i,e,t]);const s=(0,u.Z)(e);(0,a.useEffect)((()=>{s===p.kw.DOWNLOADING&&e===p.kw.YES&&(n.current=!1,i.say(d.Ru.get("download.complete")))}),[i,s,e])})(D,K);const z=(0,a.useCallback)((e=>{e.preventDefault(),V===p.vs.NO_PERMISSION?N(e,p.NV.NO_PERMISSION):(!1===t?(i(),j(!0)):L(),N(e,p.NV.ADD)),C(e)}),[L,V,t,N,i]),U=(0,a.useCallback)((t=>{t.preventDefault(),B(e),C(t),N(t,p.NV.REMOVE)}),[e,B,N]);if((0,a.useEffect)((()=>{!0===_&&!0===t&&(L(),j(!1))}),[t,_,L]),D===p.kw.YES)return(0,S.jsx)(y.Zp,{label:d.Ru.get("download.remove"),children:(0,S.jsx)(r.H,{className:I,onClick:U,iconOnly:l.F,semanticColor:"textBrightAccent",size:n,"aria-label":d.Ru.get("download.remove"),"aria-checked":!0,condensedAll:v,condensed:O})});if(V===p.vs.NO_CAPABILITY||V===p.vs.NO_PERMISSION_HIDE)return null;if(V===p.vs.NO_PERMISSION)return P?(0,S.jsx)("div",{className:s()(w,I),children:(0,S.jsx)(b.y,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,S.jsx)(g.z,{children:(0,S.jsx)("span",{children:d.Ru.get("download.upsell")})}),renderInline:!1,children:(0,S.jsx)("div",{children:(0,S.jsx)(y.Zp,{label:d.Ru.get("download.download"),children:(0,S.jsx)(r.H,{onClick:z,iconOnly:o.i,size:n,"aria-label":d.Ru.get("download.download"),"aria-checked":!1,condensedAll:v,condensed:O,disabled:M})})})})}):null;if(D===p.kw.NO)return(0,S.jsx)(y.Zp,{label:d.Ru.get("download.download"),children:(0,S.jsx)(r.H,{className:I,onClick:z,iconOnly:o.i,size:n,"aria-label":d.Ru.get("download.download"),"aria-checked":!1,condensedAll:v,condensed:O,disabled:M})});let Y;switch(n){case E.xs:Y=16;break;case E.sm:Y=24;break;default:Y=32}return(0,S.jsxs)("div",{className:s()(R,I),role:"switch","aria-checked":!0,children:[(0,S.jsx)(y.Zp,{label:d.Ru.get("download.cancel"),children:(0,S.jsx)("button",{style:{height:Y,width:Y},className:s()(k,I),onClick:U,"aria-label":d.Ru.get("download.cancel")})}),(0,S.jsx)("span",{className:s()(A),children:(0,S.jsx)(m.C,{"aria-valuetext":d.Ru.get("progress.downloading-tracks"),percentage:K.percentage,size:Y})})]})}},2296:(e,t,i)=>{i.d(t,{F:()=>v});var a=i(30758),n=i(14343),s=i(31417),r=i(37115),l=i(76633),o=i(3175),d=i(97500),c=i.n(d),u=i(81162),p=i(422),y=i(14178),m=i(86070);const g=({children:e})=>(0,m.jsx)(p.E,{dir:"auto",className:c()(y.A.rowTitle,y.A.discTitle,"standalone-ellipsis-one-line"),as:"div",variant:"bodyMediumBold",children:e});var b=i(27305),f=i(67799),T=i(60651),h=i(13679);const x=({discNumber:e})=>(0,m.jsxs)("div",{className:c()(y.A.trackListRowGrid,y.A.discRow),children:[(0,m.jsx)(T.y,{ariaColIndex:0,children:(0,m.jsx)("div",{className:y.A.rowMarker,children:(0,m.jsx)(f.a,{children:(0,m.jsx)(u.I,{size:"small"})})})}),(0,m.jsx)(h.U,{ariaColIndex:1,children:(0,m.jsx)(b.l,{children:(0,m.jsx)(g,{children:s.Ru.get("tracklist.disc-sperator.title",e)})})})]});var w=i(96614),k=i(88308),R=i(18316),A=i(55845),S=i(6107),E=i(81834);const C=(e,t)=>{const{request:i}=(0,a.useContext)(E.j),n=(0,k.lB)((()=>t),[t]),s=(0,a.useMemo)((()=>function(e){return(0,S.YD)(e)?e.items.reduce(((e,t)=>(e.push(t.discNumber-1),e.concat(Array(t.nrTracks??0).fill(t.discNumber)))),[]):null}(n)),[n]);return(0,a.useCallback)((async(t,a)=>{const r=await i(R.xt,{uri:e,offset:null!==s?t-s[t]:t,limit:a});return(0,A.T)(r?.data,n)}),[n,s,i,e])};var I=i(91182),N=i(38501),P=i(44672),$=i(7307);const v=a.memo((function({albumName:e,nrTracks:t,discs:i,albumUri:d,highlightUri:c,scrollToIndex:u,usePlayContextItem:p,hasHeaderRow:y=!0,initalTracks:g,isCompactMode:b=!1}){const f=(0,n.NC)(N.LX5),T=C(d,i),h=(0,a.useRef)(null),k=(0,a.useRef)(!1),[R,A]=(0,a.useState)(null);(0,a.useEffect)((()=>{h.current&&(R?h.current.scrollToIndex(R):u&&h.current.scrollToIndex(u))}),[R,u]);const S=(0,a.useCallback)((async(e,t)=>{const i=await T(e,t);if(c&&!R){const e=i.items?.findIndex((e=>e.type===$.c.TRACK&&e?.uri===c));A(e||-1)}return i}),[T,c,R]),E=(0,l.w)(),v=(0,a.useCallback)((e=>({uri:e.type===$.c.TRACK?e.linkedUri??e.uri:""})),[]),O=(0,a.useCallback)(((t,i)=>{if("AlbumDisc"===t.type)return(0,m.jsx)(x,{discNumber:t.discNumber},`${i}-${t.discNumber}`);const a=t.linkedUri??t.uri,n=t.playcount?parseInt(t.playcount,10):0,r=!(k.current||!c||c!==t.uri&&c!==a);r&&(k.current=!0);const l=t.hasAssociatedVideo;return(0,m.jsxs)("div",{children:[c===t.uri&&(0,m.jsx)(I.c,{artistOrShow:t.artists.map((e=>e.name)).join(s.Ru.getSeparator()),title:t.name,uri:a,entityType:I.p.TRACK}),(0,m.jsx)(o.d,{index:i,trackNumber:t.trackNumber,contextUri:d,uri:a,uid:t.uid,albumName:e,duration_ms:t.duration.milliseconds,name:t.name,isPlayable:t.isPlayable,artists:t.artists,isExplicit:t.isExplicit,isMOGEFRestricted:t.is19PlusOnly,playcount:n,shouldHighLight:r,usePlayContextItem:p,isCompactMode:b,hasAssociatedVideo:l&&f})]},i+t.uri)}),[c,e,d,p,b,f]);return(0,m.jsx)(P.pZ,{value:"album-tracklist",children:(0,m.jsx)(w.S4,{ariaLabel:e,hasHeaderRow:y,rowPlaceholder:r.Bz,columns:E,renderRow:O,resolveItem:v,nrTracks:t,fetchTracks:S,limit:300,outerRef:h,tracks:g,isCompactMode:b,columnPersistenceKey:"album-tracklist"},d)})}))},91182:(e,t,i)=>{i.d(t,{c:()=>h,p:()=>b});var a=i(30758),n=i(93240),s=i(97714),r=i(88394),l=i(31417),o=i(26344),d=i(86568),c=i(20817),u=i(20784),p=i(81752),y=i(50671),m=i(21549),g=i(86070);let b=function(e){return e.ALBUM="album",e.ARTIST="artist",e.AUDIOBOOK="audiobook",e.EPISODE="episode",e.PLAYLIST="playlist",e.PODCAST="podcast",e.TRACK="track",e}({});const f=e=>e===b.TRACK?l.Ru.get("web-player.deeplink-intent.add-to-library.liked-songs-title"):e===b.EPISODE?l.Ru.get("web-player.deeplink-intent.add-to-library.episodes-title"):l.Ru.get("web-player.deeplink-intent.add-to-library.title"),T=({entityType:e,artistOrShow:t,title:i})=>e===b.ARTIST||e===b.PODCAST?l.Ru.get("web-player.deeplink-intent.add-to-library.artist-description",{name:t??""}):l.Ru.get("web-player.deeplink-intent.add-to-library.description",{title:i??"",name:t??""}),h=e=>{const{intent:t,clear:i}=(0,d.AT)();return t!==d.pg.ADD_TO_LIBRARY?null:(0,g.jsx)(x,{...e,clearDeeplinkIntent:i})};function x({uri:e,entityType:t,artistOrShow:i,title:d,clearDeeplinkIntent:h}){const x=(0,u.f)(),w=(0,p._)(),{enqueueSnackbar:k}=(0,n.dh)(),[R,A]=(0,a.useState)(null),{spec:S,logger:E}=(0,m.r)(s.K0,{data:{uri:e,identifier:t}}),{spec:C,logger:I}=(0,m.r)(r.y4,{data:{uri:e,identifier:t}}),N=(0,y.t)(S);(0,a.useEffect)((()=>{t===b.PLAYLIST?w?.contains([e]).then((e=>A(e[0]))):x.contains(e).then((e=>A(e[0])))}),[t,x,w,e]),(0,a.useEffect)((()=>{R&&(k(l.Ru.get("web-player.deeplink-intent.add-to-library.already-in-library")),I.logImpression(C.impression()),h())}),[h,k,R,I,C]);const P=(0,a.useCallback)((()=>{E.logInteraction(S.closeButtonFactory().hitUiHide()),h()}),[h,E,S]),$=(0,a.useCallback)((()=>{t===b.PLAYLIST?w?.add([e],{before:"start"}):x.add({uris:[e]}),t===b.EPISODE||t===b.TRACK?E.logInteraction(S.addButtonFactory().hitAddToPlaylist({playlist:t===b.TRACK?c.BP:c.Xn,itemToBeAdded:e})):E.logInteraction(S.addButtonFactory().hitFollow({itemToBeFollowed:e})),h()}),[h,t,x,E,w,S,e]);return null===R?null:(0,g.jsx)(o.T,{ref:N,titleText:f(t),descriptionText:T({entityType:t,artistOrShow:i,title:d}),confirmText:l.Ru.get("playlist.extender.button.add"),cancelText:l.Ru.get("block-user.dialog.cancel"),onConfirm:$,onClose:P,"aria-label":f(t)})}},66339:(e,t,i)=>{i.d(t,{r:()=>p});var a=i(14343),n=i(50486),s=i(3773),r=i(46131),l=i(27483),o=i(81834),d=i(27963),c=i(43329),u=i(30758);function p(e){const t=(0,a.NC)(c.HO),{request:i}=(0,u.useContext)(o.j);return(0,n.I)({enabled:t,queryKey:["useDynamicColors",e],gcTime:864e5,staleTime:432e5,queryFn:async()=>{const t=await(0,d.c)(i,r.XN,{uri:e}),a=t?.data,n=a?.lookup.at(0);if(!n)throw new s.t("Empty response");if("AlbumResponseWrapper"===n?.__typename||"ArtistResponseWrapper"===n?.__typename||"PodcastOrAudiobookResponseWrapper"===n?.__typename||"EpisodeOrChapterResponseWrapper"===n?.__typename||"TrackResponseWrapper"===n?.__typename){const e=n.data;if("Album"===e.__typename||"Podcast"===e.__typename||"Audiobook"===e.__typename||"Episode"===e.__typename||"Track"===e.__typename)return(0,l.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet);if("Artist"===e.__typename)return(0,l.V)(e.visualIdentity?.wideFullBleedImage?.extractedColorSet)}throw new s.t(`Invalid response: ${t}`)},select:e=>t?e:null})}},50324:(e,t,i)=>{i.d(t,{i:()=>s});var a=i(30758);class n{constructor(e={}){this.settings={level:e.level||"polite",parent:e.parent||document.body,idPrefix:e.idPrefix||"live-region-",delay:e.delay||0},this.currentRegion=document.createElement("span")}say(e,t=this.settings.delay){this.clearNode(),this.currentRegion=document.createElement("span"),this.currentRegion.id=this.settings.idPrefix+Math.floor(1e4*Math.random());const i="assertive"!==this.settings.level?"status":"alert";this.currentRegion.setAttribute("aria-live",this.settings.level),this.currentRegion.setAttribute("role",i),this.currentRegion.setAttribute("style","clip: rect(1px, 1px, 1px, 1px); height: 1px; overflow: hidden; position: absolute; white-space: nowrap; width: 1px"),this.settings.parent.appendChild(this.currentRegion),window.setTimeout((()=>{this.currentRegion.textContent=e}),t)}clearNode(){const e=this.settings.parent.querySelector(`[id^="${this.settings.idPrefix}"]`);e&&this.settings.parent.removeChild(e)}}const s=({delay:e,idPrefix:t,level:i,parent:s}={})=>{const r=(0,a.useMemo)((()=>new n({delay:e,idPrefix:t,level:i,parent:s})),[e,t,i,s]);return(0,a.useEffect)((()=>()=>{r.clearNode()}),[r]),r}},87498:(e,t,i)=>{i.d(t,{t:()=>d});var a=i(30758),n=i(4266),s=i(61147),r=i(18753),l=i(72762);const o=[n.$.INDEX,n.$.TITLE_AND_ARTIST,n.$.PLAYS,n.$.DURATION],d=()=>{const{isCompactMode:e}=(0,s.a)(),t=(0,l.My)()===r.m.Web;return(0,a.useMemo)((()=>(({isWebPlayer:e,isCompactMode:t})=>{const i=[...o];return e&&i.splice(i.indexOf(n.$.PLAYS),1),t&&i.splice(i.indexOf(n.$.TITLE_AND_ARTIST),1,n.$.TITLE,n.$.ARTIST),i})({isWebPlayer:t,isCompactMode:e})),[e,t])}},622:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(30758);function n(e){const t=(0,a.useRef)();return(0,a.useEffect)((()=>{t.current=e}),[e]),t.current}},43855:(e,t,i)=>{i.d(t,{P:()=>a.P});var a=i(62361)},56970:(e,t,i)=>{i.d(t,{L$:()=>o,Q2:()=>d,hV:()=>l,j2:()=>r,pr:()=>u,qc:()=>s,rO:()=>c});var a=i(16157),n=i(13155);const s=({albumArtists:e,albumName:t,albumType:i,shouldLocalize:s,i18n:r})=>{if(!i||!t||!e)return"";const l=i!==a._m.Ep?(e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1))(i):i,o=(0,n.C)(i),d=`${t} - ${l} by ${e} | Spotify`,c=r.get("i18n.meta.album.title",t,o,e);return s?c:d},r=({i18n:e,shouldLocalize:t,artistTitleTagExperimentVariants:i={artistTitleTagSongsVariantEnabled:!1,artistTitleTagSongsAndMoreVariantEnabled:!1,artistTitleTagSongsAndMusicVariantEnabled:!1},artistName:a})=>{if(!a)return"";const{artistTitleTagSongsVariantEnabled:n,artistTitleTagSongsAndMoreVariantEnabled:s,artistTitleTagSongsAndMusicVariantEnabled:r}=i;if(t){if(n)return e.get("i18n.meta.artist.title.artist-songs",a);if(r)return e.get("i18n.meta.artist.title.artist-songs-and-music",a);if(s)return e.get("i18n.meta.artist.title.artist-songs-and-more",a)}return`${a} | Spotify`},l=({showOrAudiobookName:e,type:t})=>e?`${e} | ${t} on Spotify`:"",o=({episodeOrChapterName:e,showOrAudiobookName:t,type:i})=>e&&t?`${e} - ${t} | ${i} on Spotify`:"",d=({playlistName:e,userName:t,isSpotifyOwned:i=!1,spotifyPlaylistTitleTagVariants:a={spotifyPlaylistTitleTagVariant1Enabled:!1,spotifyPlaylistTitleTagVariant2Enabled:!1,spotifyPlaylistTitleTagVariant3Enabled:!1},userPlaylistTitleTagVariants:n={userPlaylistTitleTagVariant1Enabled:!1,userPlaylistTitleTagVariant2Enabled:!1,userPlaylistTitleTagVariant3Enabled:!1},count:s})=>{if(!e||!t)return"";const{spotifyPlaylistTitleTagVariant1Enabled:r,spotifyPlaylistTitleTagVariant2Enabled:l,spotifyPlaylistTitleTagVariant3Enabled:o}=a,{userPlaylistTitleTagVariant1Enabled:d,userPlaylistTitleTagVariant2Enabled:c,userPlaylistTitleTagVariant3Enabled:u}=n;if(s){const a=s>1?"Songs":"Song",n=s>1?"songs":"song";if(i){if(r)return`${e} - ${s} ${a} | Spotify Playlist`;if(l)return`${e} - Top ${s} ${a} | Spotify Playlist`;if(o)return`${e} - ${s} ${a} - playlist by Spotify`}if(d)return`${e} - playlist by ${t} - ${s} ${n} | Spotify`;if(c)return`${e} - ${s} ${n} - playlist by ${t} | Spotify`;if(u)return`${e} - ${s} ${n} | Spotify`}return`${e}${i?"":` - playlist by ${t}`} | ${i?"Spotify Playlist":"Spotify"}`},c=({i18n:e,trackArtistsList:t,trackName:i,shouldLocalize:a,disabled:n=!1})=>{if(!t||!i)return"";let s=`${i} - song and lyrics by ${t} | Spotify`,r=e.get("i18n.meta.track-lyrics.title",i,t);return n&&(s=`${i} - song by ${t} | Spotify`,r=e.get("i18n.meta.track.title",i,t)),a?r:s},u=({i18n:e,shouldLocalize:t})=>{const i=e.get("i18n.meta.home.title");return t?i:"Spotify - Web Player: Music for everyone"}}}]);
//# sourceMappingURL=5281.js.map